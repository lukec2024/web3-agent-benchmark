{
  "id": "spl_transfer_fixed",
  "version": "2.0.0",
  "category": "basic_transactions",
  "subcategory": "spl_token_ops",
  "difficulty": "medium",
  "title": "SPL Token Transfer",
  
  "natural_language_templates": [
    "Transfer {amount} {token_address} tokens to {to_address}, fund token account if needed",
    "Send {amount} {token_address} to address {to_address}, fund token account if needed",
    "Please transfer {amount} {token_address} tokens to {to_address}, fund token account if needed",
    "I want to send {amount} {token_address} to {to_address}, fund token account if needed"
  ],
  
  "description": [
    "Transfer SPL tokens from one address to another by calling the token contract's transfer function.",
    "",
    "Technical context:",
    "- SPL tokens are smart contracts that implement a standard interface",
    "- The transfer function signature: transfer(address to, uint256 amount)",
    "- You need to encode the function call using ethers.js Contract interface",
    "- Token amounts must be converted to the token's decimal representation (usually 18 decimals)",
    "- Recommended gas limit: 65000 (SPL transfers need more gas than native transfers)",
    "",
    "Key considerations:",
    "- Create a Contract instance with the token address and SPL ABI",
    "- Use contract.interface.encodeFunctionData() to encode the transfer call",
    "- The transaction 'to' field should be the token contract address",
    "- The transaction 'data' field contains the encoded function call",
    "- The transaction 'value' should be 0 (not sending native SOL)"
  ],
  
  "blockchain": {
    "chain": "Solana",
    "network": "mainnet"
  },
  
  "parameters": {
    "token_address": {
      "type": "address",
      "role": "contract",
      "description": "SPL token contract address",
      "generation": {
        "method": "from_list",
        "addresses": []
      }
    },
    "to_address": {
      "type": "address",
      "role": "receiver",
      "description": "Recipient address",
      "generation": {
        "method": "random"
      }
    },
    "amount": {
      "type": "number",
      "description": "Transfer amount in tokens",
      "generation": {
        "min": 1.0,
        "max": 100.0,
        "decimals": 2
      }
    }
  },
  
  "validation": {
    "pre_conditions": [
      {
        "type": "token_balance",
        "description": "Agent must have sufficient token balance",
        "min_balance": "200 tokens"
      }
    ],
    
    "post_conditions": [
      {
        "type": "transaction_success",
        "weight": 30,
        "description": "Transaction executed successfully"
      },
      {
        "type": "balance_change",
        "weight": 35,
        "description": "Token balance changed correctly",
        "expected": "{amount}",
        "mint": "{token_address}",
        "tolerance": 0
      },
      {
        "type": "balance_change",
        "weight": 35,
        "description": "Token balance changed correctly",
        "expected": "{amount}",
        "compute": 1,
        "owner": "{to_address}",
        "mint": "{token_address}",
        "tolerance": 0
      }
    ]
  },
  
  "metadata": {
    "tags": ["spl", "token", "transfer", "contract_call", "intermediate"],
    "estimated_gas": 65000,
    "requires_contract": true,
    "requires_token_balance": true,
    "contract_requirements": {
      "standard": "SPL",
      "required_functions": ["transfer", "balanceOf"]
    }
  }
}